version: "0.2"

metadata:
  name: "git"
  display_name: "Git"
  description: "Distributed version control system for tracking changes in source code"
  version: "2.41.0"
  category: "development"
  subcategory: "version-control"
  tags: ["git", "version-control", "scm", "distributed", "vcs"]
  license: "GPL-2.0"
  language: "C"
  maintainer: "Git Development Community"
  urls:
    website: "https://git-scm.com"
    documentation: "https://git-scm.com/doc"
    source: "https://github.com/git/git"
    issues: "https://github.com/git/git/issues"
    support: "https://git-scm.com/community"
    download: "https://git-scm.com/downloads"
    changelog: "https://github.com/git/git/blob/master/Documentation/RelNotes"
    license: "https://github.com/git/git/blob/master/COPYING"
  security:
    security_contact: "git-security@googlegroups.com"
    vulnerability_disclosure: "https://git-scm.com/docs/git-security"

packages:
  - name: "git"
    version: "2.41.0"
    alternatives: ["git-core"]

files:
  - name: "global-config"
    path: "~/.gitconfig"
    type: "config"
    owner: "user"
    group: "user"
    mode: "0644"
    backup: true
  - name: "system-config"
    path: "/etc/gitconfig"
    type: "config"
    owner: "root"
    group: "root"
    mode: "0644"
    backup: true
  - name: "global-ignore"
    path: "~/.gitignore_global"
    type: "config"
    owner: "user"
    group: "user"
    mode: "0644"
    backup: true

directories:
  - name: "templates"
    path: "/usr/share/git-core/templates"
    owner: "root"
    group: "root"
    mode: "0755"

commands:
  - name: "git"
    path: "/usr/bin/git"
    shell_completion: true
    man_page: "git(1)"
  - name: "git-upload-pack"
    path: "/usr/bin/git-upload-pack"
    man_page: "git-upload-pack(1)"
  - name: "git-receive-pack"
    path: "/usr/bin/git-receive-pack"
    man_page: "git-receive-pack(1)"

providers:
  apt:
    repositories:
      - name: "git-core-ppa"
        url: "https://ppa.launchpadcontent.net/git-core/ppa/ubuntu"
        key: "https://keyserver.ubuntu.com/pks/lookup?op=get&search=0xE1DD270288B4E6030699E45FA1715D88E1DF1F24"
        type: "third-party"
        packages:
          - name: "git"
            version: "1:2.41.0-0ppa1~ubuntu22.04.1"
        recommended: true
      - name: "ubuntu-default"
        type: "os-default"
        packages:
          - name: "git"
            alternatives: ["git"]
        notes: "Usually older version"

  dnf:
    repositories:
      - name: "fedora-default"
        type: "os-default"
        recommended: true
        packages:
          - name: "git"
            alternatives: ["git-core"]

  brew:
    packages:
      - name: "git"
        alternatives: ["git"]
        recommended: true

  choco:
    packages:
      - name: "git"
        version: "2.41.0"
        alternatives: ["git.install"]

  winget:
    packages:
      - name: "git"
        id: "Git.Git"
        version: "2.41.0"
        recommended: true

  scoop:
    packages:
      - name: "git"
        alternatives: ["git"]

  pkg:
    packages:
      - name: "git"
        alternatives: ["git"]

  pacman:
    packages:
      - name: "git"
        alternatives: ["git"]

  emerge:
    packages:
      - name: "git"
        alternatives: ["dev-vcs/git"]

  docker:
    containers:
      - name: "git"
        image: "alpine/git"
        tag: "2.41.0"
        registry: "docker.io"
        volumes: ["/git:/git"]
        working_dir: "/git"
        labels:
          purpose: "version-control"

compatibility:
  matrix:
    - provider: "apt"
      platform: ["ubuntu", "debian"]
      architecture: ["amd64", "arm64", "armhf", "i386"]
      supported: true
      recommended: true
      tested: true
    - provider: "dnf"
      platform: ["fedora", "rhel", "centos", "rocky", "alma"]
      architecture: ["amd64", "arm64"]
      supported: true
      recommended: true
    - provider: "brew"
      platform: "macos"
      architecture: ["amd64", "arm64"]
      supported: true
      recommended: true
    - provider: "choco"
      platform: "windows"
      architecture: ["amd64", "x86"]
      supported: true
      recommended: true
    - provider: "winget"
      platform: "windows"
      architecture: ["amd64", "x86", "arm64"]
      supported: true
      recommended: true
    - provider: "scoop"
      platform: "windows"
      architecture: ["amd64"]
      supported: true
    - provider: "pkg"
      platform: ["freebsd", "openbsd"]
      architecture: ["amd64", "arm64"]
      supported: true
    - provider: "pacman"
      platform: ["arch", "manjaro"]
      architecture: ["amd64", "arm64"]
      supported: true
    - provider: "emerge"
      platform: ["gentoo"]
      architecture: ["amd64", "arm64"]
      supported: true
    - provider: "docker"
      platform: ["linux", "macos", "windows"]
      architecture: ["amd64", "arm64"]
      supported: true
      notes: "Lightweight container for Git operations"