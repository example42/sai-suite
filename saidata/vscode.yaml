version: "0.2"

metadata:
  name: "vscode"
  display_name: "Visual Studio Code"
  description: "Lightweight but powerful source code editor"
  version: "1.80.0"
  category: "development"
  subcategory: "editor"
  tags: ["vscode", "editor", "ide", "development", "microsoft", "electron"]
  license: "MIT"
  language: "TypeScript"
  maintainer: "Microsoft Corporation"
  urls:
    website: "https://code.visualstudio.com"
    documentation: "https://code.visualstudio.com/docs"
    source: "https://github.com/microsoft/vscode"
    issues: "https://github.com/microsoft/vscode/issues"
    support: "https://code.visualstudio.com/docs/supporting/faq"
    download: "https://code.visualstudio.com/download"
    changelog: "https://code.visualstudio.com/updates"
    license: "https://github.com/microsoft/vscode/blob/main/LICENSE.txt"
  security:
    security_contact: "secure@microsoft.com"
    vulnerability_disclosure: "https://www.microsoft.com/en-us/msrc/bounty-terms"

packages:
  - name: "vscode"
    version: "1.80.0"
    alternatives: ["code", "visual-studio-code"]

files:
  - name: "user-settings"
    path: "~/.config/Code/User/settings.json"
    type: "config"
    owner: "user"
    group: "user"
    mode: "0644"
    backup: true
  - name: "keybindings"
    path: "~/.config/Code/User/keybindings.json"
    type: "config"
    owner: "user"
    group: "user"
    mode: "0644"
    backup: true
  - name: "snippets"
    path: "~/.config/Code/User/snippets"
    type: "config"
    owner: "user"
    group: "user"
    mode: "0755"

directories:
  - name: "user-config"
    path: "~/.config/Code/User"
    owner: "user"
    group: "user"
    mode: "0755"
  - name: "extensions"
    path: "~/.vscode/extensions"
    owner: "user"
    group: "user"
    mode: "0755"
  - name: "logs"
    path: "~/.config/Code/logs"
    owner: "user"
    group: "user"
    mode: "0755"

commands:
  - name: "code"
    path: "/usr/bin/code"
    shell_completion: true
    man_page: "code(1)"
    aliases: ["vscode"]

providers:
  apt:
    repositories:
      - name: "microsoft-official"
        url: "https://packages.microsoft.com/repos/code"
        key: "https://packages.microsoft.com/keys/microsoft.asc"
        type: "upstream"
        recommended: true
        packages:
          - name: "vscode"
            version: "1.80.0-1691620686"
            alternatives: ["code"]
      - name: "snap"
        type: "third-party"
        packages:
          - name: "vscode"
            alternatives: ["code"]
        notes: "Snap package with confined permissions"

  dnf:
    repositories:
      - name: "microsoft-official"
        url: "https://packages.microsoft.com/yumrepos/vscode"
        key: "https://packages.microsoft.com/keys/microsoft.asc"
        type: "upstream"
        recommended: true
        packages:
          - name: "vscode"
            alternatives: ["code"]

  brew:
    packages:
      - name: "vscode"
        alternatives: ["visual-studio-code"]
    casks:
      - name: "vscode"
        alternatives: ["visual-studio-code"]
        recommended: true

  choco:
    packages:
      - name: "vscode"
        version: "1.80.0"
        alternatives: ["vscode.install"]

  winget:
    packages:
      - name: "vscode"
        id: "Microsoft.VisualStudioCode"
        version: "1.80.0"
        recommended: true

  scoop:
    buckets:
      - name: "extras"
        url: "https://github.com/ScoopInstaller/Extras"
    packages:
      - name: "vscode"
        alternatives: ["vscode"]

  flatpak:
    repositories:
      - name: "flathub"
        url: "https://flathub.org/repo/flathub.flatpakrepo"
        type: "third-party"
        recommended: true
        packages:
          - name: "vscode"
            id: "com.visualstudio.code"

  snap:
    packages:
      - name: "vscode"
        alternatives: ["code"]
        channel: "stable"
        confinement: "classic"

  appimage:
    packages:
      - name: "vscode"
        url: "https://code.visualstudio.com/sha/download?build=stable&os=linux"
        version: "1.80.0"

compatibility:
  matrix:
    - provider: "apt"
      platform: ["ubuntu", "debian"]
      architecture: ["amd64", "arm64"]
      supported: true
      recommended: true
      tested: true
    - provider: "dnf"
      platform: ["fedora", "rhel", "centos", "rocky", "alma"]
      architecture: ["amd64", "arm64"]
      supported: true
      recommended: true
    - provider: "brew"
      platform: "macos"
      architecture: ["amd64", "arm64"]
      supported: true
      recommended: true
    - provider: "choco"
      platform: "windows"
      architecture: ["amd64", "arm64"]
      supported: true
      recommended: true
    - provider: "winget"
      platform: "windows"
      architecture: ["amd64", "arm64"]
      supported: true
      recommended: true
      notes: "Native Windows package manager"
    - provider: "scoop"
      platform: "windows"
      architecture: ["amd64"]
      supported: true
      notes: "Portable installation"
    - provider: "flatpak"
      platform: ["linux"]
      architecture: ["amd64", "arm64"]
      supported: true
      notes: "Sandboxed application"
    - provider: "snap"
      platform: ["ubuntu", "fedora", "arch"]
      architecture: ["amd64", "arm64"]
      supported: true
      notes: "Universal Linux package"
    - provider: "appimage"
      platform: ["linux"]
      architecture: ["amd64"]
      supported: true
      notes: "Portable Linux application"